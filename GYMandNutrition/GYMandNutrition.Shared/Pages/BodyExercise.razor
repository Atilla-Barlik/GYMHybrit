@page "/body-exercise"
@using Entities.ExerciseEntities
@using global::Services.ExerciseServices
@inject NavigationManager NavigationManager

@* @if(@Exercises == null)
{
    <p>Yükleniyor</p>
}
else
{
    <div class="container">
        <h1 style="text-align:center">Vücut Bölümleri</h1> <br>
        <div class="row">
            @foreach (var exercise in Exercises)
            {
                <div class="col-md-4 mb-4">
                    <div class="card" style="width: auto;">
                        <a @onclick="() => NavigateToDetail(exercise.ExerciseId)" style="text-decoration:none;">
                            <img src="@exercise.ExerciseImage" class="card-img-top exercise-img" alt="@exercise.ExerciseName">
                            <div class="card-body">
                                <h5 class="card-title" >@exercise.ExerciseName</h5>
                            </div>
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>
}


@code {
    [Inject] IExerciseService exerciseService { get; set; }
    public List<ExerciseResponseModel> Exercises { get; set; }

    protected override async Task OnInitializedAsync()
    {
        Exercises = await exerciseService.GetAllExercises();
    }

    private void NavigateToDetail(int id)
    {
        // Redirect to the detailed exercise page, passing the id
        NavigationManager.NavigateTo($"/exercise-list/{id}");
    }
}

<style>
    .exercise-img {
        height: 250px; /* Set a fixed height for all images */
        object-fit: contain; /* Ensures images fit within the height and width without distortion */
        width: 100%; /* Ensures the image takes up the full width of the card */
    }
</style> *@

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-6">
    <MudText Typo="Typo.h4" Align="Align.Center" Class="mb-4">Vücut Bölümleri</MudText>

    @if (Exercises == null)
    {
        <MudProgressCircular Indeterminate="true" Color="Color.Primary" Class="d-block mx-auto my-6" />
    }
    else
    {
        <MudGrid GutterSpacing="3">
            @foreach (var exercise in Exercises)
            {
                <MudItem xs="12" sm="6" md="4">
                    <MudNavLink Href="@($"/exercise-list/{exercise.ExerciseId}")" Style="text-decoration:none">
                        <MudCard Elevation="1" Class="mb-4">
                            <MudCardMedia Image="@exercise.ExerciseImage" Alt="@exercise.ExerciseName" Height="250" />
                            <MudCardContent>
                                <MudText Typo="Typo.h6" Align="Align.Center">@exercise.ExerciseName</MudText>
                            </MudCardContent>
                        </MudCard>
                    </MudNavLink>
                </MudItem>
            }
        </MudGrid>
    }
</MudContainer>

@code {
    private List<ExerciseResponseModel> Exercises;
    [Inject] IExerciseService exerciseService { get; set; }
    protected override async Task OnInitializedAsync()
    {
        Exercises = await exerciseService.GetAllExercises();
    }

    void NavigateToDetail(int id)
    {
        NavigationManager.NavigateTo($"/exercise-list/{id}");
    }
}